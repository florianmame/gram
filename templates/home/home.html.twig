{% extends 'layout.html.twig' %} 
  
  {% block title %}Category - {{ parent() }}{% endblock title %}

    

{% block innerContent %}
 {{ dump(users) }}
 {{ dump(restaurants) }}
 {% if allCategories is empty  %}
        <h3> Il n'y a aucune catégories pour l'instant. </h3>
    {% else %}
     <table class="table table-striped table-hover">
              <thead class="thead-dark">
              <tr>
                  <th>Categories</th>
  {% endif %}
              </tr>
              </thead>
              <tbody>
                  {% for category in allCategories %}
                      <tr>
                          <td>
                          <a href="{{path('api_data', {category : category.id})}}">{{ category.name }}</a>
                             
                          
                          </td>
                      </tr>
             
                {% endfor %}
              </tbody>
    </table>
  
    <h2>Nos Restaurants par catégorie</h2>


    <ul>
    {% for category in allCategories %}

        <li>{{ category.name }}</li>
            <ul>
                {% for restaurant in category.restaurants %}
                  <a href="{{path('api_data')}}">  <li>{{restaurant.name}}{{restaurant.address}}</li></a>
                    <ul>
                       {% for user in restaurant.users %}
                           <li>{{user.name}}</li>

                       {% endfor %}
                    </ul>
            
                   
                {% endfor %}
            </ul>
    {% endfor %}
    </ul> 


    <h2>Nos Restaurants favoris</h2>


    <ul>
    {# on boucle sur users pour récupérer tous les users #}
    {% for user in users %}
        {{user.name}}
        <ul>
        {# on boucle sur les restaurants car il y'a une table de jointure avec restaurants #}
            {% for restaurant in user.restaurants %}
            {# On affiche ensuite chaque restaurants qui  #}
                <a href="{{path('api_data')}}"><li>{{restaurant.name}} </li></a>

            {% endfor %}
        </ul>

    {% endfor %}
    </ul> 

{% endblock innerContent %}